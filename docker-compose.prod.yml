# Production override for Raspberry Pi with pre-built images
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
services:
  printer_service:
    image: ghcr.io/nilp0inter/kitchen-printer:latest
    build: !reset null
    device_cgroup_rules:
      - 'c 189:* rwm'
    environment:
      DRY_RUN: "false"
      BROTHER_QL_PRINTER: "usb://0x04f9:0x209b"
      BROTHER_QL_MODEL: "QL-800"
    volumes:
      - /dev/bus/usb:/dev/bus/usb
      - /run/udev:/run/udev:ro

  frostbyte_client_builder:
    image: ghcr.io/nilp0inter/frostbyte-client:latest
    command: ["sh", "-c", "cp -r /dist/* /output/"]
    volumes:
      - frostbyte_client_dist:/output

  labelmaker_client_builder:
    image: ghcr.io/nilp0inter/labelmaker-client:latest
    command: ["sh", "-c", "cp -r /dist/* /output/"]
    volumes:
      - labelmaker_client_dist:/output
